<!DOCTYPE html>
<html>
<head>
  <title>Neon Arkanoid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
      font-family: 'Courier New', sans-serif;
      touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º –∑—É–º –∏ —Å–∫—Ä–æ–ª–ª */
      cursor: none; /* –°–∫—Ä—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã */
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    #ui {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      pointer-events: none;
      z-index: 10;
    }
    .score-board {
      color: #0ff;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 10px #0ff;
    }
    #message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 30px;
      font-weight: bold;
      text-shadow: 0 0 20px #f0f;
      display: none;
      text-align: center;
    }
  </style>
</head>
<body>

<div id="ui">
  <div class="score-board">SCORE: <span id="score">0</span></div>
</div>

<div id="message">TAP TO START</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreSpan = document.getElementById('score');
const msgDiv = document.getElementById('message');

// --- –ù–ê–°–¢–†–û–ô–ö–ò ---
let width, height;
let gameRunning = false;
let score = 0;

// –®–∞—Ä
const ball = {
  x: 0, 
  y: 0, 
  dx: 0, 
  dy: 0, 
  radius: 8,
  speed: 7,
  color: '#fff'
};

// –†–∞–∫–µ—Ç–∫–∞
const paddle = {
  x: 0,
  y: 0,
  width: 120,
  height: 20,
  color: '#0ff'
};

// –ö–∏—Ä–ø–∏—á–∏
const brickConfig = {
  rows: 5,
  cols: 7,
  padding: 10,
  height: 25,
  width: 0, // –í—ã—á–∏—Å–ª–∏–º –ø–æ–∑–∂–µ
  offsetTop: 80,
  offsetLeft: 35
};
let bricks = [];

// --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
function resize() {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ–¥ —ç–∫—Ä–∞–Ω
  paddle.y = height - 50;
  
  // –ü–µ—Ä–µ—Å—á–µ—Ç –∫–∏—Ä–ø–∏—á–µ–π –ø–æ–¥ —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞
  brickConfig.cols = Math.floor(width / 60); // –°–∫–æ–ª—å–∫–æ –≤–ª–µ–∑–∞–µ—Ç
  if (brickConfig.cols > 10) brickConfig.cols = 10;
  
  let totalPadding = (brickConfig.cols + 1) * brickConfig.padding;
  brickConfig.width = (width - totalPadding) / brickConfig.cols;
  brickConfig.offsetLeft = brickConfig.padding;

  if (!gameRunning) resetGame();
}
window.addEventListener('resize', resize);

function initBricks() {
  bricks = [];
  for(let c=0; c<brickConfig.cols; c++) {
    bricks[c] = [];
    for(let r=0; r<brickConfig.rows; r++) {
      bricks[c][r] = { x: 0, y: 0, status: 1, color: getRowColor(r) };
    }
  }
}

function getRowColor(row) {
  const colors = ['#f00', '#ff0', '#0f0', '#0ff', '#f0f'];
  return colors[row % colors.length];
}

function resetGame() {
  gameRunning = false;
  score = 0;
  scoreSpan.innerText = score;
  
  ball.x = width / 2;
  ball.y = height - 60;
  ball.dx = 0; // –ñ–¥–µ–º —Å—Ç–∞—Ä—Ç–∞
  ball.dy = 0;
  
  paddle.x = (width - paddle.width) / 2;
  
  initBricks();
  msgDiv.style.display = 'block';
  msgDiv.innerText = "TAP TO START";
  draw();
}

function startGame() {
  if (gameRunning) return;
  gameRunning = true;
  msgDiv.style.display = 'none';
  
  // –°–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª —Å—Ç–∞—Ä—Ç–∞
  let dir = Math.random() < 0.5 ? -1 : 1;
  ball.dx = (Math.random() * 4 + 2) * dir;
  ball.dy = -ball.speed;
  
  loop();
}

// --- –§–ò–ó–ò–ö–ê ---
function update() {
  if (!gameRunning) return;

  // –î–≤–∏–∂–µ–Ω–∏–µ —à–∞—Ä–∞
  ball.x += ball.dx;
  ball.y += ball.dy;

  // –û—Ç—Å–∫–æ–∫ –æ—Ç —Å—Ç–µ–Ω
  if(ball.x + ball.radius > width || ball.x - ball.radius < 0) {
    ball.dx = -ball.dx;
  }
  if(ball.y - ball.radius < 0) {
    ball.dy = -ball.dy;
  }
  
  // –ü—Ä–æ–∏–≥—Ä—ã—à (—É–ø–∞–ª –≤–Ω–∏–∑)
  if(ball.y + ball.radius > height) {
    msgDiv.innerText = "GAME OVER";
    msgDiv.style.display = 'block';
    gameRunning = false;
    setTimeout(resetGame, 2000); // –†–µ—Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫
    return;
  }

  // –û—Ç—Å–∫–æ–∫ –æ—Ç —Ä–∞–∫–µ—Ç–∫–∏
  if(ball.x > paddle.x && ball.x < paddle.x + paddle.width &&
     ball.y + ball.radius > paddle.y && ball.y - ball.radius < paddle.y + paddle.height) {
       
       // –ú–∞–≥–∏—è —Ñ–∏–∑–∏–∫–∏: —É–≥–æ–ª –æ—Ç—Å–∫–æ–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫—É–¥–∞ –ø–æ–ø–∞–ª —à–∞—Ä
       let hitPoint = ball.x - (paddle.x + paddle.width / 2);
       // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º (-1 –ª–µ–≤—ã–π –∫—Ä–∞–π, 1 –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π)
       hitPoint = hitPoint / (paddle.width / 2);
       
       // –ò–∑–º–µ–Ω—è–µ–º —É–≥–æ–ª
       ball.dx = hitPoint * 8; // –†–µ–∑–∫–∏–π —É–≥–æ–ª –ø–æ –∫—Ä–∞—è–º
       ball.dy = -Math.abs(ball.speed); // –í—Å–µ–≥–¥–∞ –≤–≤–µ—Ä—Ö
  }

  // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∫–∏—Ä–ø–∏—á–∞–º–∏
  let activeBricks = 0;
  for(let c=0; c<brickConfig.cols; c++) {
    for(let r=0; r<brickConfig.rows; r++) {
      let b = bricks[c][r];
      if(b.status == 1) {
        activeBricks++;
        if(ball.x > b.x && ball.x < b.x + brickConfig.width &&
           ball.y > b.y && ball.y < b.y + brickConfig.height) {
             ball.dy = -ball.dy;
             b.status = 0; // –†–∞–∑–±–∏–ª–∏
             score += 10;
             scoreSpan.innerText = score;
             // –£—Å–∫–æ—Ä—è–µ–º —à–∞—Ä –Ω–µ–º–Ω–æ–≥–æ —Å –∫–∞–∂–¥—ã–º –∫–∏—Ä–ø–∏—á–æ–º
             if(Math.abs(ball.speed) < 12) ball.speed += 0.1; 
        }
      }
    }
  }
  
  if (activeBricks === 0) {
    msgDiv.innerText = "YOU WIN!";
    msgDiv.style.display = 'block';
    gameRunning = false;
    setTimeout(resetGame, 3000);
  }
}

// --- –û–¢–†–ò–°–û–í–ö–ê ---
function draw() {
  ctx.clearRect(0, 0, width, height);

  // –ö–∏—Ä–ø–∏—á–∏
  for(let c=0; c<brickConfig.cols; c++) {
    for(let r=0; r<brickConfig.rows; r++) {
      if(bricks[c][r].status == 1) {
        let brickX = (c * (brickConfig.width + brickConfig.padding)) + brickConfig.offsetLeft;
        let brickY = (r * (brickConfig.height + brickConfig.padding)) + brickConfig.offsetTop;
        bricks[c][r].x = brickX;
        bricks[c][r].y = brickY;
        
        ctx.fillStyle = bricks[c][r].color;
        ctx.shadowColor = bricks[c][r].color;
        ctx.shadowBlur = 15;
        ctx.fillRect(brickX, brickY, brickConfig.width, brickConfig.height);
      }
    }
  }

  // –†–∞–∫–µ—Ç–∫–∞
  ctx.fillStyle = paddle.color;
  ctx.shadowColor = paddle.color;
  ctx.shadowBlur = 20;
  ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

  // –®–∞—Ä
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fillStyle = ball.color;
  ctx.shadowColor = '#fff';
  ctx.shadowBlur = 10;
  ctx.fill();
  ctx.closePath();
}

function loop() {
  if (gameRunning) {
    update();
    draw();
    requestAnimationFrame(loop);
  }
}

// --- –£–ü–†–ê–í–õ–ï–ù–ò–ï ---
// –ú—ã—à—å
document.addEventListener("mousemove", (e) => {
  let relativeX = e.clientX;
  if(relativeX > 0 && relativeX < width) {
    paddle.x = relativeX - paddle.width / 2;
  }
});

// –¢–∞—á (—Ç–µ–ª–µ—Ñ–æ–Ω)
document.addEventListener("touchmove", (e) => {
  let relativeX = e.touches[0].clientX;
  if(relativeX > 0 && relativeX < width) {
    paddle.x = relativeX - paddle.width / 2;
  }
}, {passive: false});

// –°—Ç–∞—Ä—Ç –ø–æ –∫–ª–∏–∫—É
document.addEventListener("click", startGame);
document.addEventListener("touchstart", startGame);

// –ó–∞–ø—É—Å–∫
resize();
</script>
  <style>
  .back-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 30px;
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    font-family: sans-serif;
    font-weight: bold;
    font-size: 14px;
    z-index: 9999; /* –ß—Ç–æ–±—ã –±—ã–ª–∞ –ø–æ–≤–µ—Ä—Ö –∏–≥—Ä—ã */
    transition: all 0.3s ease;
    background: rgba(0, 0, 0, 0.3); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
  }
  .back-btn:hover {
    background: #fff;
    color: #000;
    border-color: #fff;
    box-shadow: 0 0 15px white;
    transform: scale(1.1);
  }
</style>
<a href="index.html" class="back-btn">üè† MENU</a>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Neon Arkanoid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
      font-family: 'Courier New', sans-serif;
      touch-action: none;
      cursor: none; 
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    #ui {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      pointer-events: none;
      z-index: 10;
    }
    .score-board {
      color: #0ff;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 10px #0ff;
    }
    #message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 30px;
      font-weight: bold;
      text-shadow: 0 0 20px #f0f;
      display: none;
      text-align: center;
      white-space: pre-wrap; /* –ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ */
      line-height: 1.5;
    }
  </style>
</head>
<body>

<div id="ui">
  <div class="score-board">SCORE: <span id="score">0</span></div>
</div>

<div id="message">TAP TO START</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreSpan = document.getElementById('score');
const msgDiv = document.getElementById('message');

// --- –ù–ê–°–¢–†–û–ô–ö–ò ---
let width, height;
let gameRunning = false;
let score = 0;

// –®–∞—Ä
const ball = {
  x: 0, y: 0, dx: 0, dy: 0, radius: 8, speed: 7, color: '#fff'
};

// –†–∞–∫–µ—Ç–∫–∞
const paddle = {
  x: 0, y: 0, width: 120, height: 20, color: '#0ff'
};

// –ö–∏—Ä–ø–∏—á–∏
const brickConfig = {
  rows: 5, cols: 7, padding: 10, height: 25, width: 0, offsetTop: 80, offsetLeft: 35
};
let bricks = [];

// --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
function resize() {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;

  paddle.y = height - 50;
  
  brickConfig.cols = Math.floor(width / 60);
  if (brickConfig.cols > 10) brickConfig.cols = 10;
  
  let totalPadding = (brickConfig.cols + 1) * brickConfig.padding;
  brickConfig.width = (width - totalPadding) / brickConfig.cols;
  brickConfig.offsetLeft = brickConfig.padding;

  if (!gameRunning) resetGame();
}
window.addEventListener('resize', resize);

function initBricks() {
  bricks = [];
  for(let c=0; c<brickConfig.cols; c++) {
    bricks[c] = [];
    for(let r=0; r<brickConfig.rows; r++) {
      bricks[c][r] = { x: 0, y: 0, status: 1, color: getRowColor(r) };
    }
  }
}

function getRowColor(row) {
  const colors = ['#f00', '#ff0', '#0f0', '#0ff', '#f0f'];
  return colors[row % colors.length];
}

function resetGame() {
  gameRunning = false;
  score = 0;
  scoreSpan.innerText = score;
  
  ball.x = width / 2;
  ball.y = height - 60;
  ball.dx = 0; 
  ball.dy = 0;
  
  paddle.x = (width - paddle.width) / 2;
  
  initBricks();
  msgDiv.style.display = 'block';
  msgDiv.innerText = "TAP TO START";
  draw();
}

function startGame() {
  gameRunning = true;
  msgDiv.style.display = 'none';
  
  let dir = Math.random() < 0.5 ? -1 : 1;
  ball.dx = (Math.random() * 4 + 2) * dir;
  ball.dy = -ball.speed;
  
  loop();
}

// –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –ö–õ–ò–ö–ê
function handleInput() {
  if (gameRunning) return; // –ï—Å–ª–∏ –∏–≥—Ä–∞ –∏–¥–µ—Ç, –∫–ª–∏–∫ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç
  
  // –ï—Å–ª–∏ –∏–≥—Ä–∞ —Å—Ç–æ–∏—Ç (–Ω–∞—á–∞–ª–æ –∏–ª–∏ –ø—Ä–æ–∏–≥—Ä—ã—à)
  resetGame(); // –°–Ω–∞—á–∞–ª–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º (—Å—Ç–∞–≤–∏–º —à–∞—Ä –Ω–∞ –º–µ—Å—Ç–æ)
  startGame(); // –ü–æ—Ç–æ–º –∑–∞–ø—É—Å–∫–∞–µ–º
}


// --- –§–ò–ó–ò–ö–ê ---
function update() {
  if (!gameRunning) return;

  ball.x += ball.dx;
  ball.y += ball.dy;

  if(ball.x + ball.radius > width || ball.x - ball.radius < 0) ball.dx = -ball.dx;
  if(ball.y - ball.radius < 0) ball.dy = -ball.dy;
  
  // –ü–†–û–ò–ì–†–´–® (–†—É—á–Ω–æ–π —Ä–µ—Å—Ç–∞—Ä—Ç)
  if(ball.y + ball.radius > height) {
    msgDiv.innerText = "GAME OVER\nTAP TO RESTART"; // –ü–æ–Ω—è—Ç–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å
    msgDiv.style.display = 'block';
    gameRunning = false;
    // –¢–ê–ô–ú–ï–† –£–ë–†–ê–ù. –ñ–¥–µ–º –∫–ª–∏–∫–∞.
    return;
  }

  // –û—Ç—Å–∫–æ–∫ –æ—Ç —Ä–∞–∫–µ—Ç–∫–∏
  if(ball.x > paddle.x && ball.x < paddle.x + paddle.width &&
     ball.y + ball.radius > paddle.y && ball.y - ball.radius < paddle.y + paddle.height) {
       let hitPoint = ball.x - (paddle.x + paddle.width / 2);
       hitPoint = hitPoint / (paddle.width / 2);
       ball.dx = hitPoint * 8;
       ball.dy = -Math.abs(ball.speed);
  }

  // –ö–∏—Ä–ø–∏—á–∏
  let activeBricks = 0;
  for(let c=0; c<brickConfig.cols; c++) {
    for(let r=0; r<brickConfig.rows; r++) {
      let b = bricks[c][r];
      if(b.status == 1) {
        activeBricks++;
        if(ball.x > b.x && ball.x < b.x + brickConfig.width &&
           ball.y > b.y && ball.y < b.y + brickConfig.height) {
             ball.dy = -ball.dy;
             b.status = 0;
             score += 10;
             scoreSpan.innerText = score;
             if(Math.abs(ball.speed) < 12) ball.speed += 0.1; 
        }
      }
    }
  }
  
  // –ü–û–ë–ï–î–ê (–¢–æ–∂–µ —Ä—É—á–Ω–æ–π —Ä–µ—Å—Ç–∞—Ä—Ç)
  if (activeBricks === 0) {
    msgDiv.innerText = "YOU WIN!\nTAP TO PLAY AGAIN";
    msgDiv.style.display = 'block';
    gameRunning = false;
    // –¢–ê–ô–ú–ï–† –£–ë–†–ê–ù
  }
}

// --- –û–¢–†–ò–°–û–í–ö–ê ---
function draw() {
  ctx.clearRect(0, 0, width, height);

  for(let c=0; c<brickConfig.cols; c++) {
    for(let r=0; r<brickConfig.rows; r++) {
      if(bricks[c][r].status == 1) {
        let brickX = (c * (brickConfig.width + brickConfig.padding)) + brickConfig.offsetLeft;
        let brickY = (r * (brickConfig.height + brickConfig.padding)) + brickConfig.offsetTop;
        bricks[c][r].x = brickX;
        bricks[c][r].y = brickY;
        
        ctx.fillStyle = bricks[c][r].color;
        ctx.shadowColor = bricks[c][r].color;
        ctx.shadowBlur = 15;
        ctx.fillRect(brickX, brickY, brickConfig.width, brickConfig.height);
      }
    }
  }

  ctx.fillStyle = paddle.color;
  ctx.shadowColor = paddle.color;
  ctx.shadowBlur = 20;
  ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fillStyle = ball.color;
  ctx.shadowColor = '#fff';
  ctx.shadowBlur = 10;
  ctx.fill();
  ctx.closePath();
}

function loop() {
  if (gameRunning) {
    update();
    draw();
    requestAnimationFrame(loop);
  }
}

// --- –£–ü–†–ê–í–õ–ï–ù–ò–ï ---
document.addEventListener("mousemove", (e) => {
  let relativeX = e.clientX;
  if(relativeX > 0 && relativeX < width) paddle.x = relativeX - paddle.width / 2;
});

document.addEventListener("touchmove", (e) => {
  let relativeX = e.touches[0].clientX;
  if(relativeX > 0 && relativeX < width) paddle.x = relativeX - paddle.width / 2;
}, {passive: false});

// –¢–µ–ø–µ—Ä—å –∫–ª–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç handleInput –≤–º–µ—Å—Ç–æ startGame
document.addEventListener("click", handleInput);
document.addEventListener("touchstart", handleInput);

resize();
</script>

<style>
  .home-btn {
    position: fixed;
    top: 15px;
    right: 15px;
    padding: 8px 15px;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid #f0f; /* –†–æ–∑–æ–≤–∞—è –¥–ª—è –∞—Ä–∫–∞–Ω–æ–∏–¥–∞ */
    border-radius: 20px;
    color: #f0f;
    text-decoration: none;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 16px;
    z-index: 100000;
    box-shadow: 0 0 10px #f0f;
  }
  .home-btn:active {
    background: #f0f;
    color: #000;
  }
</style>
<a href="index.html" class="home-btn">üè† MENU</a>

</body>
</html>

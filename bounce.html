<!DOCTYPE html>
<html>
<head>
  <title>Neon Bounce</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body {
      margin: 0;
      background: #222;
      overflow: hidden;
      font-family: sans-serif;
      touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º –∂–µ—Å—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞ */
      user-select: none;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
    #controls {
      position: absolute;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      box-sizing: border-box;
      pointer-events: none; /* –ß—Ç–æ–±—ã –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Å–∫–≤–æ–∑—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    }
    .btn {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #fff;
      border-radius: 50%;
      color: white;
      font-size: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto; /* –ö–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã */
      backdrop-filter: blur(5px);
    }
    .btn:active {
      background: rgba(255, 255, 255, 0.4);
    }
    /* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Jump) */
    .right-controls {
      display: flex;
    }
    /* –õ–µ–≤–∞—è —á–∞—Å—Ç—å (Arrows) */
    .left-controls {
      display: flex;
      gap: 15px;
    }
  </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div id="controls">
  <div class="left-controls">
    <div class="btn" id="btnLeft">‚Üê</div>
    <div class="btn" id="btnRight">‚Üí</div>
  </div>
  <div class="right-controls">
    <div class="btn" id="btnJump">ü¶ò</div>
  </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// --- –ù–ê–°–¢–†–û–ô–ö–ò ---
let width, height;
const gravity = 0.5;
const friction = 0.8; // –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
const jumpForce = -10;
const moveSpeed = 5;

// –ö–∞—Ä—Ç–∞ —É—Ä–æ–≤–Ω—è (1 = –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, 0 = –ø—É—Å—Ç–æ)
// –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—ã–µ –±–ª–æ–∫–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞
const levelData = [
  {x: 0, y: 300, w: 800, h: 50},   // –ü–æ–ª –Ω–∞—á–∞–ª—å–Ω—ã–π
  {x: 300, y: 200, w: 100, h: 20}, // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 1
  {x: 500, y: 150, w: 100, h: 20}, // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 2
  {x: 700, y: 250, w: 100, h: 20}, // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 3
  {x: 900, y: 300, w: 500, h: 50}, // –ü–æ–ª –¥–∞–ª—å–Ω–∏–π
  {x: 1200, y: 200, w: 100, h: 20} // –í—ã—Å–æ–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
];

// –ò–≥—Ä–æ–∫ (–®–∞—Ä)
const player = {
  x: 100,
  y: 100,
  radius: 15,
  dx: 0,
  dy: 0,
  grounded: false
};

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
const keys = {
  left: false,
  right: false,
  jump: false
};

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
function resize() {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
}
window.addEventListener('resize', resize);
resize();

// --- –§–ò–ó–ò–ö–ê –ò –û–ë–ù–û–í–õ–ï–ù–ò–ï ---
function update() {
  // 1. –ü—Ä–∏–º–µ–Ω—è–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  if (keys.right) {
    if (player.dx < moveSpeed) player.dx++;
  }
  if (keys.left) {
    if (player.dx > -moveSpeed) player.dx--;
  }

  // –¢—Ä–µ–Ω–∏–µ (—á—Ç–æ–±—ã —à–∞—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è)
  player.dx *= friction;

  // 2. –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
  player.dy += gravity;

  // –ü—Ä—ã–∂–æ–∫ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞ –∑–µ–º–ª–µ)
  if (keys.jump && player.grounded) {
    player.dy = jumpForce;
    player.grounded = false;
  }

  // 3. –î–≤–∏–∂–µ–Ω–∏–µ
  player.x += player.dx;
  player.y += player.dy;

  // 4. –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è (–ö–æ–ª–ª–∏–∑–∏–∏)
  player.grounded = false; // –°—á–∏—Ç–∞–µ–º, —á—Ç–æ –º—ã –≤ –≤–æ–∑–¥—É—Ö–µ, –ø–æ–∫–∞ –Ω–µ –¥–æ–∫–∞–∂–µ–º –æ–±—Ä–∞—Ç–Ω–æ–µ

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∞ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º
  levelData.forEach(block => {
    // –ü—Ä–æ—Å—Ç–µ–π—à–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —à–∞—Ä –Ω–∞–¥ –±–ª–æ–∫–æ–º –ø–æ X –∏ –∫–∞—Å–∞–µ—Ç—Å—è –ª–∏ –ø–æ Y
    if (player.x > block.x - player.radius && 
        player.x < block.x + block.w + player.radius) {
      
      // –ü–∞–¥–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
      if (player.y + player.radius > block.y && 
          player.y + player.radius < block.y + block.h + 10 && 
          player.dy >= 0) {
            
        player.y = block.y - player.radius; // –°—Ç–∞–≤–∏–º —à–∞—Ä –Ω–∞ –±–ª–æ–∫
        player.dy = -player.dy * 0.4; // –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å–∫–æ–∫
        if(Math.abs(player.dy) < 1) player.dy = 0; // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥—Ä–æ–∂–∞–Ω–∏–µ
        player.grounded = true;
      }
    }
  });

  // –£–ø–∞–ª –≤ –ø—Ä–æ–ø–∞—Å—Ç—å? –†–µ—Å–ø–∞—É–Ω
  if (player.y > height + 100) {
    player.x = 100;
    player.y = 100;
    player.dx = 0;
    player.dy = 0;
  }
}

// --- –û–¢–†–ò–°–û–í–ö–ê ---
function draw() {
  // –û—á–∏—Å—Ç–∫–∞
  ctx.clearRect(0, 0, width, height);

  // –ö–ê–ú–ï–†–ê: –°–¥–≤–∏–≥–∞–µ–º –º–∏—Ä —Ç–∞–∫, —á—Ç–æ–±—ã —à–∞—Ä –±—ã–ª –≤ —Ü–µ–Ω—Ç—Ä–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
  // –ù–æ –Ω–µ –¥–∞–µ–º –∫–∞–º–µ—Ä–µ —É–π—Ç–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –≤–ª–µ–≤–æ (–º–µ–Ω—å—à–µ 0)
  let cameraX = player.x - width / 2;
  if (cameraX < 0) cameraX = 0;

  ctx.save(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  ctx.translate(-cameraX, 0); // –°–¥–≤–∏–≥–∞–µ–º –º–∏—Ä –≤–ª–µ–≤–æ

  // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  ctx.fillStyle = '#0ff'; // –ù–µ–æ–Ω–æ–≤—ã–π –≥–æ–ª—É–±–æ–π
  ctx.shadowBlur = 10;
  ctx.shadowColor = '#0ff';
  levelData.forEach(block => {
    ctx.fillRect(block.x, block.y, block.w, block.h);
  });
  ctx.shadowBlur = 0; // –í—ã–∫–ª—é—á–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ

  // –†–∏—Å—É–µ–º –∏–≥—Ä–æ–∫–∞ (–®–∞—Ä)
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
  ctx.fillStyle = '#ff0044'; // –ö—Ä–∞—Å–Ω—ã–π —à–∞—Ä
  ctx.fill();
  
  // –ë–ª–∏–∫ –Ω–∞ —à–∞—Ä–µ (–æ–±—ä–µ–º)
  ctx.beginPath();
  ctx.arc(player.x - 5, player.y - 5, 5, 0, Math.PI * 2);
  ctx.fillStyle = 'rgba(255,255,255,0.5)';
  ctx.fill();
  
  ctx.restore(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ –º–µ—Å—Ç–æ (–¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

// --- –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ù–ê–ñ–ê–¢–ò–ô ---
const btnLeft = document.getElementById('btnLeft');
const btnRight = document.getElementById('btnRight');
const btnJump = document.getElementById('btnJump');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫–Ω–æ–ø–æ–∫
function bindTouch(btn, code) {
  btn.addEventListener('touchstart', (e) => { e.preventDefault(); keys[code] = true; });
  btn.addEventListener('touchend', (e) => { e.preventDefault(); keys[code] = false; });
  btn.addEventListener('mousedown', (e) => { e.preventDefault(); keys[code] = true; });
  btn.addEventListener('mouseup', (e) => { e.preventDefault(); keys[code] = false; });
}

bindTouch(btnLeft, 'left');
bindTouch(btnRight, 'right');
bindTouch(btnJump, 'jump');

// –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–¥–ª—è –ü–ö)
document.addEventListener('keydown', (e) => {
  if (e.code === 'ArrowLeft') keys.left = true;
  if (e.code === 'ArrowRight') keys.right = true;
  if (e.code === 'Space' || e.code === 'ArrowUp') keys.jump = true;
});
document.addEventListener('keyup', (e) => {
  if (e.code === 'ArrowLeft') keys.left = false;
  if (e.code === 'ArrowRight') keys.right = false;
  if (e.code === 'Space' || e.code === 'ArrowUp') keys.jump = false;
});

// –ó–∞–ø—É—Å–∫
loop();
</script>
</body>
</html>

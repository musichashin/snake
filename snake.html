<!DOCTYPE html>
<html>
<head>
  <title>Neon Snake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* --- –ù–ï–û–ù–û–í–´–ï –°–¢–ò–õ–ò (CSS) --- */
    html, body {
      height: 100%;
      margin: 0;
      background: #000000; /* –ê–±—Å–æ–ª—é—Ç–Ω–æ —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
      color: #0ff; /* –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ - –≥–æ–ª—É–±–æ–π –Ω–µ–æ–Ω */
      font-family: 'Orbitron', sans-serif; /* –§—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω—ã–π —à—Ä–∏—Ñ—Ç */
      touch-action: none; 
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      overflow: hidden;
    }

    /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
    #score-board {
        width: 90vmin;
        max-width: 600px;
        display: flex;
        justify-content: space-between;
        padding: 15px 0;
        font-size: 18px;
        font-weight: bold;
        text-shadow: 0 0 5px #0ff; /* –°–≤–µ—Ç—è—â–∏–π—Å—è —Ç–µ–∫—Å—Ç */
    }
    .score-box span { color: #39ff14; text-shadow: 0 0 10px #39ff14; } /* –ó–µ–ª–µ–Ω—ã–π —Å—á–µ—Ç */

    /* –ü–æ–ª–µ –∏–≥—Ä—ã */
    canvas {
      /* –ù–µ–æ–Ω–æ–≤–∞—è —Ä–∞–º–∫–∞ –≤–æ–∫—Ä—É–≥ –ø–æ–ª—è */
      border: 2px solid #0ff;
      background-color: #050505; /* –ü–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω –≤–Ω—É—Ç—Ä–∏ */
      width: 90vmin; 
      height: 90vmin;
      max-width: 600px;
      max-height: 600px;
      /* –°–∏–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –≤—Å–µ–≥–æ –ø–æ–ª—è */
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1);
      border-radius: 5px;
    }

    /* –ö–Ω–æ–ø–∫–∏ */
    #controls {
        margin-top: 20px;
        display: grid;
        grid-template-columns: repeat(3, 70px);
        grid-template-rows: repeat(2, 70px);
        gap: 10px;
    }

    .btn {
        background: #111; /* –¢–µ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
        border: 2px solid #0ff; /* –°–∏–Ω—è—è –Ω–µ–æ–Ω–æ–≤–∞—è —Ä–∞–º–∫–∞ */
        border-radius: 15px;
        color: #0ff;
        font-size: 30px;
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
        /* –°–ª–∞–±–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ */
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
        transition: all 0.1s ease;
    }
    .btn:active {
        background: #0ff; /* –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∞ –≤—Å–ø—ã—Ö–∏–≤–∞–µ—Ç */
        color: #000;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        transform: scale(0.95);
    }

    #upBtn { grid-area: 1 / 2 / 2 / 3; }
    #leftBtn { grid-area: 2 / 1 / 3 / 2; }
    #downBtn { grid-area: 2 / 2 / 3 / 3; }
    #rightBtn { grid-area: 2 / 3 / 3 / 4; }

    /* –û–≤–µ—Ä–ª–µ–π –°—Ç–∞—Ä—Ç / –ö–æ–Ω–µ—Ü */
    #overlay {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 10;
    }
    #overlay h1 { 
        margin: 0 0 20px 0; font-size: 40px; 
        color: #ff00ff; /* –†–æ–∑–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        text-shadow: 0 0 20px #ff00ff;
    }
    #status-text { font-size: 20px; margin-bottom: 30px; text-align: center; color: #ddd;}
    
    #action-btn {
        padding: 15px 40px;
        font-size: 24px;
        background: transparent;
        color: #39ff14;
        border: 3px solid #39ff14;
        border-radius: 50px;
        font-weight: bold;
        font-family: 'Orbitron', sans-serif;
        cursor: pointer;
        /* –ó–µ–ª–µ–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ä—Ç–∞ */
        box-shadow: 0 0 15px rgba(57, 255, 20, 0.4);
        text-shadow: 0 0 5px #39ff14;
    }
    #action-btn:active {
         background: #39ff14;
         color: black;
         box-shadow: 0 0 30px rgba(57, 255, 20, 1);
    }
  </style>
</head>
<body>

<div id="score-board">
    <div class="score-box">SCORE: <span id="currentScore">0</span></div>
    <div class="score-box">BEST: <span id="bestScore">0</span></div>
</div>

<canvas width="640" height="640" id="game"></canvas>

<div id="overlay">
    <h1 id="overlay-title">NEON SNAKE</h1>
    <p id="status-text">SYSTEM READY. PRESS START.</p>
    <button id="action-btn" onclick="startGame()">INITIALIZE</button>
</div>

<div id="controls">
  <button id="upBtn" class="btn">‚Üë</button>
  <button id="leftBtn" class="btn">‚Üê</button>
  <button id="downBtn" class="btn">‚Üì</button>
  <button id="rightBtn" class="btn">‚Üí</button>
</div>

<script>
// --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
var canvas = document.getElementById('game');
var context = canvas.getContext('2d');

var grid = 32; 
var count = 0;
var score = 0;
var highScore = 0;
var gameRunning = false;

try {
    highScore = localStorage.getItem('snakeHighScore') || 0;
} catch (e) { console.log("LocalStorage blocked"); }
document.getElementById('bestScore').innerText = highScore;

var snake = {
  x: 320, y: 320, dx: grid, dy: 0,
  cells: [{x: 320, y: 320}, {x: 288, y: 320}, {x: 256, y: 320}],
  maxCells: 3
};
var apple = { x: 320, y: 160 };

function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}

// --- –ò–ì–†–û–í–û–ô –¶–ò–ö–õ –° –ù–ï–û–ù–û–í–û–ô –û–¢–†–ò–°–û–í–ö–û–ô ---
function loop() {
  requestAnimationFrame(loop);
  if (!gameRunning) return;
  if (++count < 6) { return; }
  count = 0;

  context.clearRect(0,0,canvas.width,canvas.height);

  snake.x += snake.dx;
  snake.y += snake.dy;

  if (snake.x < 0) { snake.x = canvas.width - grid; }
  else if (snake.x >= canvas.width) { snake.x = 0; }
  if (snake.y < 0) { snake.y = canvas.height - grid; }
  else if (snake.y >= canvas.height) { snake.y = 0; }

  snake.cells.unshift({x: snake.x, y: snake.y});
  if (snake.cells.length > snake.maxCells) {
    snake.cells.pop();
  }

  // --- –†–ò–°–£–ï–ú –Ø–ë–õ–û–ö–û (–ù–ï–û–ù) ---
  // –í–∫–ª—é—á–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
  context.shadowBlur = 20;       // –†–∞–¥–∏—É—Å —Å–≤–µ—á–µ–Ω–∏—è
  context.shadowColor = "#ff00ff"; // –¶–≤–µ—Ç —Å–≤–µ—á–µ–Ω–∏—è (–ú–∞–¥–∂–µ–Ω—Ç–∞)
  context.fillStyle = '#ff00ff';   // –¶–≤–µ—Ç —Å–∞–º–æ–π –µ–¥—ã
  // –†–∏—Å—É–µ–º
  context.fillRect(apple.x + 4, apple.y + 4, grid - 8, grid - 8);
  // –í–ê–ñ–ù–û: –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ–Ω–æ –Ω–µ –≤–ª–∏—è–ª–æ –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã
  context.shadowBlur = 0;


  // --- –†–ò–°–£–ï–ú –ó–ú–ï–ô–ö–£ (–ù–ï–û–ù) ---
  snake.cells.forEach(function(cell, index) {
    // –í–∫–ª—é—á–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –∑–º–µ–π–∫–∏
    context.shadowBlur = 15;
    context.shadowColor = "#39ff14"; // –¶–≤–µ—Ç —Å–≤–µ—á–µ–Ω–∏—è (–ö–∏—Å–ª–æ—Ç–Ω–æ-–∑–µ–ª–µ–Ω—ã–π)
    context.fillStyle = '#39ff14';   // –¶–≤–µ—Ç –∑–º–µ–π–∫–∏
    
    // –†–∏—Å—É–µ–º —Å–µ–≥–º–µ–Ω—Ç (—á—É—Ç—å –º–µ–Ω—å—à–µ –∫–ª–µ—Ç–∫–∏, —á—Ç–æ–±—ã –±—ã–ª–∏ –∑–∞–∑–æ—Ä—ã)
    context.fillRect(cell.x + 2, cell.y + 2, grid - 4, grid - 4);
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
    context.shadowBlur = 0;
    
    if (cell.x === apple.x && cell.y === apple.y) {
      snake.maxCells++; score++;
      document.getElementById('currentScore').innerText = score;
      apple.x = getRandomInt(0, 20) * grid;
      apple.y = getRandomInt(0, 20) * grid;
    }

    for (var i = index + 1; i < snake.cells.length; i++) {
      if (cell.x === snake.cells[i].x && cell.y === snake.cells[i].y) {
        gameOver();
      }
    }
  });
}

function gameOver() {
    gameRunning = false;
    var finalScoreText = "SCORE: " + score;
    var titleText = "SYSTEM FAILURE";
    var titleColor = "#ff0000"; // –ö—Ä–∞—Å–Ω—ã–π

    if (score > highScore) {
        highScore = score;
        try { localStorage.setItem('snakeHighScore', highScore); } catch(e){}
        document.getElementById('bestScore').innerText = highScore;
        finalScoreText = "üèÜ NEW HIGH SCORE: " + score;
        titleText = "NEW RECORD!";
        titleColor = "#39ff14"; // –ó–µ–ª–µ–Ω—ã–π
    }

    document.getElementById('overlay-title').innerText = titleText;
    document.getElementById('overlay-title').style.color = titleColor;
    document.getElementById('overlay-title').style.textShadow = `0 0 20px ${titleColor}`;
    document.getElementById('status-text').innerText = finalScoreText;
    document.getElementById('action-btn').innerText = "REBOOT SYSTEM";
    document.getElementById('overlay').style.display = 'flex';
}

function startGame() {
    snake.x = 320; snake.y = 320;
    snake.cells = [{x: 320, y: 320}, {x: 288, y: 320}, {x: 256, y: 320}];
    snake.maxCells = 3;
    snake.dx = grid; snake.dy = 0;
    score = 0;
    document.getElementById('currentScore').innerText = '0';
    apple.x = getRandomInt(0, 20) * grid;
    apple.y = getRandomInt(0, 20) * grid;
    document.getElementById('overlay').style.display = 'none';
    gameRunning = true;
}

// --- –£–ü–†–ê–í–õ–ï–ù–ò–ï ---
function moveUp() { if (snake.dy === 0) { snake.dy = -grid; snake.dx = 0; } }
function moveDown() { if (snake.dy === 0) { snake.dy = grid; snake.dx = 0; } }
function moveLeft() { if (snake.dx === 0) { snake.dx = -grid; snake.dy = 0; } }
function moveRight() { if (snake.dx === 0) { snake.dx = grid; snake.dy = 0; } }

const upBtn = document.getElementById('upBtn');
const downBtn = document.getElementById('downBtn');
const leftBtn = document.getElementById('leftBtn');
const rightBtn = document.getElementById('rightBtn');

['touchstart', 'mousedown'].forEach(evt => {
    upBtn.addEventListener(evt, (e) => { e.preventDefault(); moveUp(); });
    downBtn.addEventListener(evt, (e) => { e.preventDefault(); moveDown(); });
    leftBtn.addEventListener(evt, (e) => { e.preventDefault(); moveLeft(); });
    rightBtn.addEventListener(evt, (e) => { e.preventDefault(); moveRight(); });
});

document.addEventListener('keydown', function(e) {
  if (e.which === 37) moveLeft();
  else if (e.which === 38) moveUp();
  else if (e.which === 39) moveRight();
  else if (e.which === 40) moveDown();
});

requestAnimationFrame(loop);
</script>
 <style>
  .home-btn {
    position: fixed; /* –§–∏–∫—Å–∏—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∞, –∞ –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    top: 15px;
    right: 15px;
    padding: 8px 15px;
    background: rgba(0, 0, 0, 0.8); /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç —á–∏—Ç–∞–ª—Å—è */
    border: 1px solid #0f0; /* –ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ –ø–æ–¥ —Å—Ç–∏–ª—å –∑–º–µ–π–∫–∏ */
    border-radius: 20px;
    color: #0f0;
    text-decoration: none;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 16px;
    z-index: 100000; /* –°–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π */
    box-shadow: 0 0 10px #0f0; /* –ù–µ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
  }
  .home-btn:active {
    background: #0f0;
    color: #000;
  }
</style>
<a href="index.html" class="home-btn">üè† MENU</a>
</body>
</html>
